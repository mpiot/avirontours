<div{{ attributes }}>
    <div class="row">
        <div class="col">
            <a
                href="{{ this.previousMonthPath }}"
                class="{{ html_classes('btn', 'btn-outline-secondary', {
                    'disabled': this.previousMonthPath is null
                }) }}"
            >
                <span class="fas fa-circle-chevron-left"></span>
            </a>
        </div>

        <div class="col fs-3 text-center">
            {{ this.currentMonth|date('F Y') }}
        </div>

        <div class="col text-end">
            <a
                href="{{ this.nextMonthPath }}"
                class="{{ html_classes('btn', 'btn-outline-secondary', {
                    'disabled': this.nextMonthPath is null
                }) }}"
            >
                <span class="fas fa-circle-chevron-right"></span>
            </a>
        </div>
    </div>

    {% if this.newEventRouteName %}
        <div class="text-center mb-3">
            <a
                class="btn btn-outline-primary btn-sm"
                href="{{ this.newEventPath }}"
            >
                <span class="fa-solid fa-plus"></span> {{ this.newEventButtonText }}
            </a>
        </div>
    {% endif %}

    <table class="table table-bordered" style="width: 100%; table-layout: fixed;">
        <thead>
            <tr class="text-center">
                <th class="p-1">
                    <span class="d-lg-none">L</span>
                    <span class="d-none d-lg-block">Lundi</span>
                </th>
                <th class="p-1">
                    <span class="d-lg-none">M</span>
                    <span class="d-none d-lg-block">Mardi</span>
                </th>
                <th class="p-1">
                    <span class="d-lg-none">M</span>
                    <span class="d-none d-lg-block">Mercredi</span>
                </th>
                <th class="p-1">
                    <span class="d-lg-none">J</span>
                    <span class="d-none d-lg-block">Jeudi</span>
                </th>
                <th class="p-1">
                    <span class="d-lg-none">V</span>
                    <span class="d-none d-lg-block">Vendredi</span>
                </th>
                <th class="p-1">
                    <span class="d-lg-none">S</span>
                    <span class="d-none d-lg-block">Samedi</span>
                </th>
                <th class="p-1">
                    <span class="d-lg-none">D</span>
                    <span class="d-none d-lg-block">Dimanche</span>
                </th>
                <th class="p-1">
                    Summary
                </th>
            </tr>
        </thead>

        <tbody>
        {% for week in this.weeks %}
            <tr>
                {% for day in week %}
                    <td class="{{ html_classes('p-1', {
                        'bg-body-secondary': not this.isPartOfMonth(day.dateTime) or this.isDisabled(day.dateTime)
                    }) }}" style="width: 12%; height: 12%;">
                        <div class="d-flex flex-column">
                            <div class="mt-1 small" style="height: 1rem;">
                                {% if 'now'|date('Y-m-d') == day.dateTime|date('Y-m-d') %}
                                    <span class="border border-primary rounded-circle bg-primary-subtle p-1">
                                        {{ day.dateTime|date('j') }}
                                    </span>
                                {% else %}
                                    {{ day.dateTime|date('j') }}
                                {% endif %}
                            </div>

                            <div style="min-height: 3rem;">
                                {% for event in day.events %}
                                    <div class="d-flex align-items-center border rounded border-secondary-subtle p-1 m-1">
                                        <div class="flex-grow-1">
                                            <div class="small">
                                                <a href="{{ event.link }}">{{ event.name }}</a>
                                            </div>
                                            <div class="small"><em>{{ event.details }}</em></div>
                                        </div>

                                        {% if event.actions is not empty %}
                                        <div>
                                            {% for action in event.actions %}
                                                <a href="{{ action.link }}">{{ action.name|raw }}</a>
                                            {% endfor %}
                                        </div>
                                        {% endif %}
                                    </div>
                                {% endfor %}
                            </div>

                            <div class="align-self-center" style="height: 1rem;">
                                {% if not this.isDisabled(day.dateTime) and this.newEventRouteName %}
                                    <a
                                        class="link-dark"
                                        href="{{ this.newEventPath(day.dateTime) }}"
                                    >
                                        <span class="fa-solid fa-plus"></span>
                                    </a>
                                {% endif %}
                            </div>
                        </div>
                    </td>
                {% endfor %}

                <td>
                    ...
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
